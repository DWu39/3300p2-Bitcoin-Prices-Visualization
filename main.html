<html>
<head>
    <script src="http://d3js.org/d3.v3.min.js"></script>
</head>
<body>
    <div id='graph'></div>
    
<script>
    
    // return an object with time string parsed
    var parseTime = function(datetime) {
        var datetime = datetime.split(" ");
        var date = datetime[0].split("/");
        var time = datetime[1].split(":");
        
        var year = 20+date[2];
        var month = date[0];
        var day = date[1];
        var hour = time[0];
        var minute = time[1];
        var period;
        
        if (hour < 12) {
            if (hour == 0) {
                hour = 12;
            }
            period = "AM";
        } else {
            if (hour > 12) {
                hour = +hour%12;
            }
            period = "PM";
        }

        return {
            time: datetime.join(" "),
            year: +year,
            month: +month,
            day: +day,
            hour: +hour,
            minute: +minute,
            period: period
        };
    }

    // create canvas for graph
    var height = 800;
    var width = 800;

    var svg = d3.select("#graph").append("svg").attr("height", height).attr("width", width);

    // holds the bitcoin prices and times
    var points = [];
    
    // pull the data for the bitcoins and create the graph
    d3.csv("bitcoinstest.csv", function(d) {
        var point = parseTime(d.time);
        point.price = +d.buying;
        return point;
        
    }, function(error, rows) {
        points = rows;
        
        // TODO: create the default graph
        // Call a create graph function that we can swap out if we want to change the default graph
        
        var xScale = d3.scale.linear().domain([0, 50]).range([0, width]);
        var yScale = d3.scale.linear().domain([0, 50]).range([height, 0]);
    });
</script>
</body>
</html>
